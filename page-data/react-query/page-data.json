{"componentChunkName":"component---node-modules-gatsby-theme-portfolio-minimal-src-templates-article-index-tsx","path":"/react-query/","result":{"pageContext":{"article":{"banner":null,"body":"<aside>\nğŸ’¡ react-queryëŠ” data fetching, ìºì‹±, ë™ê¸°í™”, ì„œë²„ ìª½ ë°ì´í„° ì—…ë°ì´íŠ¸ ë“±ì„ ì‰½ê²Œ ë§Œë“¤ì–´ì£¼ëŠ” React ë¼ì´ë¸ŒëŸ¬ë¦¬\n</aside>\n<p>ëŒ€ë¶€ë¶„ì˜ ê¸°ì¡´ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” í´ë¼ì´ì–¸íŠ¸ ìƒíƒœ ê´€ë¦¬ì— ì í•©í•˜ì§€ë§Œ, ë¹„ë™ê¸° ë˜ëŠ” ì„œë²„ ìƒ…ì•  ê´€ë¦¬ì—ëŠ” ì í•©í•˜ì§€ ì•Šë‹¤.</p>\n<h2>ê¸°ë³¸ ì„¤ì •</h2>\n<h3>ì˜µì…˜</h3>\n<ol>\n<li>\n<p>staleTime</p>\n<p>ìºì‹œë¥¼ ì‚¬ìš©í•˜ë©´ì„œ ë§¤ë²ˆ background-refetchingì„ í•œ í›„, ë³€ê²½ ì‚¬í•­ì´ ìˆìœ¼ë©´ ê·¸ ë•Œ UIë¥¼ ë³€ê²½í•˜ê¸° ë•Œë¬¸ì— ë§¤ë²ˆ ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì´ ë°œìƒí•œë‹¤.</p>\n<p>ë§Œì•½ ì„œë²„ ë°ì´í„°ê°€ ìì£¼ ë³€ê²½ë˜ì§€ ì•ŠëŠ” ì„œë¹„ìŠ¤ì˜ ê²½ìš° staleTimeì„ í†µí•´ background-refetching ì‹œê°„ì„ ì¡°ì •í•  ìˆ˜ ìˆë‹¤.</p>\n</li>\n<li>\n<p>refetchOnMount</p>\n<p>useQuery hookì˜ ì˜µì…˜ìœ¼ë¡œ ì¤„ ìˆ˜ ìˆëŠ” ê°’ì´ë‹¤.</p>\n<p>ê¸°ë³¸ê°’ì€ trueë¡œ, í˜ì´ì§€ë¥¼ ìµœì´ˆ ë°©ë¬¸ í›„ ë°ì´í„°ë¥¼ ìºì‹±í•œ ë‹¤ìŒì— ì¬ë°©ë¬¸ì‹œ ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ë  ë•Œ ë°ì´í„°ê°€ stale(ì˜¤ë˜ëœ) ìƒíƒœì´ë©´ refetchê°€ ë°œìƒí•œë‹¤.</p>\n<p>ì´ˆê¸° ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ”ë° ìœ ìš©í•˜ë©°, ì‹¤ì‹œê°„ìœ¼ë¡œ ì—…ë°ì´íŠ¸ ë˜ì§€ ì•ŠëŠ” ì‚¬ì´íŠ¸ì˜ ê²½ìš° falseë¡œ ë‘ì–´ë„ ê´œì°®ë‹¤.</p>\n<p>ë¸Œë¼ìš°ì € í¬ì»¤ìŠ¤ì‹œì— refetchí•˜ëŠ” ê²ƒê³¼ ìƒê´€ ì—†ë‹¤.</p>\n</li>\n<li>\n<p>refetchOnWindowFocus</p>\n<p>ì„œë²„ ë°ì´í„°ê°€ ë³€ê²½ë˜ì—ˆì„ ë•Œ, ìƒˆë¡œê³ ì¹¨ì„ í•˜ì§€ ì•Šì•„ë„ windowì— ë‹¤ì‹œ focusë¥¼ í•œë‹¤ë©´ refetchë¥¼ í†µí•´ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ UIì— ì ìš©ì‹œí‚¨ë‹¤.</p>\n<p>â†’ windowì— focus ëœë‹¤ëŠ” ê²ƒì€?</p>\n<p>ë‹¤ë¥¸ íƒ­ì—ì„œ ëŒì•„ì˜¤ê±°ë‚˜, alt tabìœ¼ë¡œ ë‹¤ë¥¸ ì•±ì„ ì‚¬ìš©í•˜ë‹¤ ì˜¨ë‹¤ê±°ë‚˜ ë“±ì„ ë§í•œë‹¤.</p>\n<p>windowì— focus ë˜ì—ˆì„ ë•Œ ë°ì´í„°ê°€ stale ìƒíƒœì¼ë•Œ refetchë¥¼ í•œë‹¤. (trueë¡œ ì„¤ì •ë˜ì–´ ìˆì„ ê²½ìš°)</p>\n</li>\n<li>\n<p>refetchOnReconnect</p>\n<p>ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì´ ëŠê²¼ë‹¤ê°€ ë‹¤ì‹œ ì—°ê²° ë˜ì—ˆì„ ë•Œ refetchë¥¼ í•œë‹¤.</p>\n</li>\n<li>\n<p>cacheTime</p>\n<p>ê¸°ë³¸ì ìœ¼ë¡œ ë¹„í™œì„± ì¿¼ë¦¬ëŠ” 5ë¶„ í›„ì— ê°€ë¹„ì§€ ìˆ˜ì§‘ì´ ëœë‹¤.</p>\n<p>ì´ ì‹œê°„ì„ ë³€ê²½í•˜ë ¤ë©´ cacheTimeì„ í†µí•´ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.</p>\n</li>\n<li>\n<p>retry</p>\n<p>ì‹¤íŒ¨í•œ ì¿¼ë¦¬ëŠ” ìë™ìœ¼ë¡œ 3ë²ˆ ì¬ì‹œë„ í•œë‹¤.</p>\n</li>\n<li>\n<p>suspense</p>\n<p>trueë¡œ ì„¤ì •í•  ê²½ìš° <a href=\"https://www.notion.so/Suspense-df3769c1028d4ef1b38a7bbd0da18628?pvs=21\">suspense</a> ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.</p>\n</li>\n</ol>\n<h2>Queries</h2>\n<p>ì¿¼ë¦¬ëŠ” ê³ ìœ í‚¤(queryKey)ì— ì—°ê²°ëœ ë¹„ë™ê¸° ë°ì´í„° ì†ŒìŠ¤ ë‹¨ìœ„ë¡œ ì‘ë™ ëœë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useQuery <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-query'</span>\n \n <span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">const</span> info <span class=\"token operator\">=</span> <span class=\"token function\">useQuery</span><span class=\"token punctuation\">(</span><span class=\"token string\">'todos'</span><span class=\"token punctuation\">,</span> fetchTodoList<span class=\"token punctuation\">)</span>\n <span class=\"token punctuation\">}</span></code></pre></div>\n<p>ì¿¼ë¦¬ëŠ” ì„œë²„ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ ëª¨ë“  Promise ê¸°ë°˜ ë©”ì„œë“œì— ëŒ€í•´ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.</p>\n<h3>Query Keys</h3>\n<p>React QuerëŠ” query keyë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì¿¼ë¦¬ ìºì‹±ì„ ê´€ë¦¬í•œë‹¤.</p>\n<p>ì¿¼ë¦¬ í‚¤ëŠ” ë‹¨ìˆœí•œ ë¬¸ìì—´ì´ ë  ìˆ˜ë„ ìˆê³ , ë§ì€ ë¬¸ìì—´ê³¼ ì¤‘ì²©ëœ ê°ì²´ì˜ ë°°ì—´ê³¼ ê°™ì´ ë³µì¡í•  ìˆ˜ë„ ìˆë‹¤.</p>\n<p>(ì¿¼ë¦¬ í‚¤ê°€ ì§ë ¬í™” ê°€ëŠ¥í•˜ê³ , ì¿¼ë¦¬ ë°ì´í„°ì— ê³ ìœ í•œ í•œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.)</p>\n<ul>\n<li>\n<p>ë°°ì—´ í‚¤</p>\n<p>ì¿¼ë¦¬ì— ë°ì´í„°ë¥¼ ê³ ìœ í•˜ê²Œ ì„¤ëª…í•˜ê¸° ìœ„í•´ ì¶”ê°€ ì •ë³´ê°€ í•„ìš”í•œ ê²½ìš° ë¬¸ìì—´ì´ ìˆëŠ” ë°°ì—´ê³¼ ì§ë ¬í™” ê°€ëŠ¥í•œ ê°œì²´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„¤ëª…í•  ìˆ˜ ìˆë‹¤.</p>\n<p>ì¶”ê°€ ë§¤ê°œë³€ìˆ˜ê°€ ìˆëŠ” ì¿¼ë¦¬, ì¶”ê°€ ì˜µì…˜ì˜ ê°œì²´ë¥¼ ì „ë‹¬í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤.</p>\n<p>ì¿¼ë¦¬ ê¸°ëŠ¥ì´ ë³€ìˆ˜ì— ì˜ì§€ í•˜ëŠ” ê²½ìš° ì•„ë˜ì™€ ê°™ì´ ì¿¼ë¦¬ í‚¤ì— í¬í•¨ëœë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Todos</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> todoId <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token function\">useQuery</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'todos'</span><span class=\"token punctuation\">,</span> todoId<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">fetchTodoById</span><span class=\"token punctuation\">(</span>todoId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n <span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n</ul>\n<h3>Query Functions</h3>\n<p>ì¿¼ë¦¬ í•¨ìˆ˜ëŠ” Promiseë¥¼ returní•˜ëŠ” ëª¨ë“  í•¨ìˆ˜ì¼ ìˆ˜ ìˆë‹¤.</p>\n<p>return ëœ PromiseëŠ” errorë¥¼ ë°œìƒì‹œí‚¤ê±°ë‚˜ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì•¼ í•œë‹¤.</p>\n<h2>ë³‘ë ¬ ì¿¼ë¦¬ (Parallel Queries)</h2>\n<p>ë³‘ë ¬ ì¿¼ë¦¬ëŠ” ë³‘ë ¬ë¡œ ì‹¤í–‰ë˜ê±°ë‚˜ ë™ì‹œì— ê°€ì ¸ì˜¤ëŠ” ë™ì‹œì„±ì„ ìµœëŒ€í™” í•˜ê¸° ìœ„í•œ ì¿¼ë¦¬ì´ë‹¤.</p>\n<h3>ìˆ˜ë™ ë³‘ë ¬ ì¿¼ë¦¬</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">App</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token comment\">// The following queries will execute in parallel</span>\n   <span class=\"token keyword\">const</span> usersQuery <span class=\"token operator\">=</span> <span class=\"token function\">useQuery</span><span class=\"token punctuation\">(</span><span class=\"token string\">'users'</span><span class=\"token punctuation\">,</span> fetchUsers<span class=\"token punctuation\">)</span>\n   <span class=\"token keyword\">const</span> teamsQuery <span class=\"token operator\">=</span> <span class=\"token function\">useQuery</span><span class=\"token punctuation\">(</span><span class=\"token string\">'teams'</span><span class=\"token punctuation\">,</span> fetchTeams<span class=\"token punctuation\">)</span>\n   <span class=\"token keyword\">const</span> projectsQuery <span class=\"token operator\">=</span> <span class=\"token function\">useQuery</span><span class=\"token punctuation\">(</span><span class=\"token string\">'projects'</span><span class=\"token punctuation\">,</span> fetchProjects<span class=\"token punctuation\">)</span>\n   <span class=\"token operator\">...</span>\n <span class=\"token punctuation\">}</span></code></pre></div>\n<p>ì›í•˜ëŠ” ë§Œí¼ì˜ useQuery / useInfiniteQueryë¥¼ ë‚˜ë€íˆ ì‚¬ìš©í•œë‹¤.</p>\n<h3>ë™ì  ë³‘ë ¬ ì¿¼ë¦¬</h3>\n<p>ê°„ë‹¨í•˜ê²Œ ë§í•´ì„œ queryKeyì™€ queryFnì„ ë™ì ìœ¼ë¡œ ì£¼ëŠ” ë°©ë²•ì´ë‹¤.</p>\n<p>ë³‘ë ¬ ì¿¼ë¦¬ ì‘ì—…ì„ ìˆ˜í–‰ì„ í•˜ì§€ë§Œ ìƒí™©ì— ë”°ë¼ ì¿¼ë¦¬ ì‘ì—…ì´ ìœ ë™ì ìœ¼ë¡œ ë³€í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">//useQueriesì˜ ì‚¬ìš© ë°©ë²•ì€ ë‹¨ìˆœí•˜ê²Œ useQueryë¥¼ ë°°ì—´ë¡œ ë„£ì–´ì£¼ëŠ” ê²ƒì´ë‹¤.</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> users <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">const</span> userQueries <span class=\"token operator\">=</span> <span class=\"token function\">useQueries</span><span class=\"token punctuation\">(</span>\n     users<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n       <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n         <span class=\"token literal-property property\">queryKey</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'user'</span><span class=\"token punctuation\">,</span> user<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n         <span class=\"token function-variable function\">queryFn</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">fetchUserById</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n       <span class=\"token punctuation\">}</span>\n     <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n   <span class=\"token punctuation\">)</span>\n <span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> queries <span class=\"token operator\">=</span> <span class=\"token function\">useQueries</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    useQuery1<span class=\"token punctuation\">,</span>\n    useQuery2<span class=\"token punctuation\">,</span>\n    useQuery3<span class=\"token punctuation\">,</span>\n    <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ì—¬ê¸°ì„œ <a href=\"https://www.notion.so/Suspense-df3769c1028d4ef1b38a7bbd0da18628?pvs=21\">Suspense</a> ì— useQueriesì— ê´€í•œ ë‚´ìš©ì´ ì¡°ê¸ˆ ìˆëŠ”ë° Suspenseë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤ë©´ ì°¸ê³ í•´ë³´ì</p>\n<h2>ì¢…ì† ì¿¼ë¦¬</h2>\n<p>ì¢…ì† ì¿¼ë¦¬ëŠ” ì‹¤í–‰í•˜ê¸° ì´ ì „ì— ì™„ë£Œí•´ì•¼ í•˜ëŠ” ì´ì „ ì¿¼ë¦¬ì— ì˜ì¡´í•œë‹¤.</p>\n<p>enabledì¿¼ë¦¬ ì˜µì…˜ë§Œ ì‚¬ìš©í•˜ë©´ ëœë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// Get the user</span>\n <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">data</span><span class=\"token operator\">:</span> user <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useQuery</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'user'</span><span class=\"token punctuation\">,</span> email<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> getUserByEmail<span class=\"token punctuation\">)</span>\n \n <span class=\"token keyword\">const</span> userId <span class=\"token operator\">=</span> user<span class=\"token operator\">?.</span>id\n \n <span class=\"token comment\">// Then get the user's projects</span>\n <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> isIdle<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">data</span><span class=\"token operator\">:</span> projects <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useQuery</span><span class=\"token punctuation\">(</span>\n   <span class=\"token punctuation\">[</span><span class=\"token string\">'projects'</span><span class=\"token punctuation\">,</span> userId<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n   getProjectsByUser<span class=\"token punctuation\">,</span>\n   <span class=\"token punctuation\">{</span>\n     <span class=\"token comment\">// The query will not execute until the userId exists</span>\n     <span class=\"token literal-property property\">enabled</span><span class=\"token operator\">:</span> <span class=\"token operator\">!</span><span class=\"token operator\">!</span>userId<span class=\"token punctuation\">,</span>\n   <span class=\"token punctuation\">}</span>\n <span class=\"token punctuation\">)</span>\n \n <span class=\"token comment\">// isIdle will be `true` until `enabled` is true and the query begins to fetch.</span>\n <span class=\"token comment\">// It will then go to the `isLoading` stage and hopefully the `isSuccess` stage :)</span></code></pre></div>\n<h2>ì¿¼ë¦¬ ë¹„í™œì„±í™” / ì¼ì‹œ ì •ì§€</h2>\n<p>ì¿¼ë¦¬ê°€ ìë™ìœ¼ë¡œ ì‹¤í–‰ë˜ì§€ ì•Šê²Œ í•˜ê¸° ìœ„í•´ì„œëŠ” enabled ì¿¼ë¦¬ ì˜µì…˜ì„ falseë¡œ ì„¤ì •í•˜ë©´ ëœë‹¤.</p>\n<p>enabled ì˜µì…˜ì´ falseë¡œ ì„¤ì •ë˜ì–´ ìˆìœ¼ë©´,</p>\n<ul>\n<li>\n<p>ì¿¼ë¦¬ì— ìºì‹œëœ ë°ì´í„°ê°€ ìˆëŠ” ê²½ìš° :</p>\n<p>ì¿¼ë¦¬ëŠ” status === 'success'ë˜ëŠ” isSuccessìƒíƒœ ì—ì„œ ì´ˆê¸°í™”ëœë‹¤ .</p>\n</li>\n<li>\n<p>ì¿¼ë¦¬ì— ìºì‹œëœ ë°ì´í„°ê°€ ì—†ëŠ” ê²½ìš°</p>\n<p>ì¿¼ë¦¬ëŠ” status === 'idle'ë˜ëŠ” isIdleìƒíƒœ ì—ì„œ ì‹œì‘ëœë‹¤ .</p>\n</li>\n<li>\n<p>ì¿¼ë¦¬ëŠ” ë§ˆìš´íŠ¸ ì‹œ ìë™ìœ¼ë¡œ ê°€ì ¸ì˜¤ì§€ ì•ŠëŠ”ë‹¤.</p>\n</li>\n<li>\n<p>ìƒˆ ì¸ìŠ¤í„´ìŠ¤ê°€ ë§ˆìš´íŠ¸ë˜ê±°ë‚˜ ìƒˆ ì¸ìŠ¤í„´ìŠ¤ê°€ ë‚˜íƒ€ë‚  ë•Œ ì¿¼ë¦¬ê°€ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ìë™ìœ¼ë¡œ ë‹¤ì‹œ ê°€ì ¸ì˜¤ì§€ ì•ŠëŠ”ë‹¤.</p>\n</li>\n<li>\n<p>ì¿¼ë¦¬ëŠ” ì¿¼ë¦¬ í´ë¼ì´ì–¸íŠ¸ invalidateQueriesì™€ refetchQueriesì¼ë°˜ì ìœ¼ë¡œ ì¿¼ë¦¬ë¥¼ ë‹¤ì‹œ ê°€ì ¸ì˜¤ëŠ” í˜¸ì¶œì„ ë¬´ì‹œí•œë‹¤ .</p>\n</li>\n<li>\n<p>refetch ê°€ì ¸ì˜¬ ì¿¼ë¦¬ë¥¼ ìˆ˜ë™ìœ¼ë¡œ íŠ¸ë¦¬ê±°í•˜ëŠ” ë° ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</p>\n</li>\n</ul>\n<p>!! í•˜ì§€ë§Œ ì—¬ê¸°ì„œ ì£¼ì˜í•´ì•¼ í•  ì ì´ ìˆë‹¤.</p>\n<p>enabled ì˜µì…˜ì„ falseë¡œ ì„¤ì •í•  ê²½ìš°, ì²« ë§ˆìš´íŠ¸ ì‹œ useQueryê°€ fetcher í•¨ìˆ˜ë¥¼ ìë™ í˜¸ì¶œí•˜ê³  ì‹¤íŒ¨í•  ê²½ìš° ì¬ì‹œë„ í•˜ëŠ” í–‰ìœ„ë¥¼ ì‚¬ì „ ì°¨ë‹¨í•œ ê²ƒì„ì„ ì•Œì•„ì•¼ í•œë‹¤.</p>\n<p>í•œë§ˆë””ë¡œ useQueryì˜ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì§€ ì•Šê³ , ìˆ˜ë™ì ìœ¼ë¡œ refetch í•¨ìˆ˜ë¥¼ í†µí•´ í˜¸ì¶œí•´ì•¼ í•œë‹¤.</p>\n<p>í•˜ì§€ë§Œ <strong>refetch</strong> í•¨ìˆ˜ëŠ” <strong>ìºì‹± ê²°ê³¼ëŠ” ì¡°íšŒí•˜ì§€ ì•Šê³  ì™„ì „íˆ ë¬´ì‹œí•œ ì±„ ìš”ì²­ì„ ë³´ë‚´ëŠ” ë©”ì„œë“œ</strong>ì´ë‹¤.</p>\n<p>ë•Œë¬¸ì— react-queryì˜ ìºì‹±ì„ ì‚¬ìš©í•˜ê³ ì í•˜ëŠ” ê²½ìš°ì—ëŠ” refetch í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ì¢‹ì§€ ì•Šë‹¤.</p>\n<p>ë•Œë¬¸ì— ë‚˜ëŠ” enabled ì˜µì…˜ì„ ì‚¬ìš©í•  ë•Œ, íŠ¹ì • ìƒíƒœë¥¼ ì¶©ì¡±í•  ë•Œë¬¸ trueë¡œ í•˜ê³ , ê·¸ ì™¸ì—ëŠ” falseë¡œ í•˜ì—¬ ì´ˆê¸° ìš”ì²­ì‹œ ì˜¤ë¥˜ë¥¼ ë°©ì§€í•˜ê³  ìˆë‹¤.</p>\n<p>ê·¸ë ‡ê²Œ í•˜ë©´ ì¡°ê±´ë¶€ë¡œ enabled ì˜µì…˜ì´ trueë¡œ ì„¤ì •ë˜ì–´ ìš”ì²­ì„ ë‚ ë¦¬ê²Œ ë˜ë©´ì„œ ìºì‹±ì—ë„ ì €ì¥ì´ ëœë‹¤.</p>\n<h2>ì¿¼ë¦¬ ì¬ì‹œë„</h2>\n<p>useQueryë¡œ ìš”ì²­í•œ ì¿¼ë¦¬ê°€ ì‹¤íŒ¨ ì‹œ retry ì˜µì…˜ì„ í†µí•´ ë™ì‘ì„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.</p>\n<p>ë”°ë¡œ ì„¤ì •í•˜ì§€ ì•Šì„ ê²½ìš°, ì‹¤íŒ¨ì‹œ  3ë²ˆ ì—°ì† ì¬ ì‹œë„ë¥¼ í•œë‹¤.</p>\n<p>ì¿¼ë¦¬ë¥¼ ì‹¤íŒ¨í•˜ë©´ ì—°ì† ì¬ ì‹œë„ì˜ ìµœëŒ€ ìˆ˜ì— ë„ë‹¬í•˜ì§€ ì•Šì€ ê²½ìš° ì¿¼ë¦¬ê°€ ìë™ìœ¼ë¡œ ì¿¼ë¦¬ë¥¼ ë‹¤ì‹œ ì‹œë„í•œë‹¤.</p>\n<ul>\n<li>retry = false : ì¬ì‹œë„ë¥¼ í•˜ì§€ ì•ŠëŠ”ë‹¤.</li>\n<li>retry = true : ì‹¤íŒ¨í•œ ìš”ì²­ì„ ë¬´í•œí•˜ê²Œ ì¬ì‹œë„ í•œë‹¤.</li>\n<li>retry = (ìˆ«ì) : ì§€ì •í•œ ìˆ«ìë§Œí¼ ì¬ì‹œë„ í•œë‹¤.</li>\n<li>retry = (failureCount, error) => â€¦  : ìš”ì²­ì´ ì‹¤íŒ¨í•œ ì´ìœ ì— ë”°ë¼ ì‚¬ìš©ì ì •ì˜ ë…¼ë¦¬ë¥¼ í—ˆìš©í•œë‹¤.</li>\n</ul>\n<h3>Retry Delay</h3>\n<p>ì¬ì‹œë„ëŠ” ìš”ì²­ì´ ì‹¤íŒ¨í•  ê²½ìš° ë°”ë¡œ ì‹œë„ ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ì„¤ì •í•  ìˆ˜ ìˆë‹¤.</p>\n<p>ê¸°ë³¸ê°’ retryDelayì€ 1000ì‹œë„í•  ë•Œë§ˆë‹¤ ë‘ ë°°( ms ì—ì„œ ì‹œì‘)ë¡œ ì„¤ì • ë˜ì§€ë§Œ 30ì´ˆë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ë‹¤.</p>\n<h2>Paginated / Lagged Queries</h2>\n<p>í˜ì´ì§€ê°€ ìˆëŠ” ë°ì´í„°ì— ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token function\">useQuery</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'projects'</span><span class=\"token punctuation\">,</span> page<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> fetchProjects<span class=\"token punctuation\">)</span></code></pre></div>\n<h3>keepPreviousData</h3>\n<p>ìœ„ì™€ ê°™ì€ ì½”ë“œë¡œ ì²˜ë¦¬í•˜ê²Œ ë˜ë©´, ê°ê°ì˜ ìƒˆ í˜ì´ì§€ê°€ ì™„ì „íˆ ìƒˆë¡œìš´ ì¿¼ë¦¬ë¡œ ì²˜ë¦¬ë˜ê¸° ë•Œë¬¸ì— UIê°€ success ë° loading ìƒíƒœì—ì„œ ì í”„í•˜ê±°ë‚˜ ì í”„í•˜ì§€ ëª»í•˜ê²Œ ë˜ëŠ” ê²½ìš°ê°€ ë°œìƒí•œë‹¤.</p>\n<p>ì´ ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì˜µì…˜ì´ <strong>keepPreviousData</strong>ì´ë‹¤.</p>\n<p>keepPreviousDataë¥¼ trueë¡œ ì„¤ì •í•  ê²½ìš°, ì¿¼ë¦¬ í‚¤ê°€ ë³€ê²½ë˜ì–´ì„œ ìƒˆë¡œìš´ ë°ì´í„°ë¥¼ ìš”ì²­í•˜ëŠ” ë™ì•ˆì—ë„ ë§ˆì§€ë§‰ dataë¥¼ ìœ ì§€í•œë‹¤.</p>\n<p>ì´ë¥¼ í†µí•´ í˜ì´ì§€ë„¤ì´ì…˜ì„ êµ¬í˜„í•  ë•Œ, ìºì‹œë˜ì§€ ì•Šì€ í˜ì´ì§€ë¥¼ ë¶ˆëŸ¬ì˜¬ ë•Œ í™”ë©´ì—ì„œ ëª©ë¡ì´ ì‚¬ë¼ì ¸ ê¹œë¹¡ê±°ë¦¬ëŠ” í˜„ìƒì„ ë°©ì§€í•  ìˆ˜ ìˆë‹¤.</p>\n<p>ìƒˆ ë°ì´í„°ê°€ ì˜¤ë©´ ì´ì „ì˜ ë°ì´í„°ê°€ ì›í™œí•˜ê²Œ swapí•˜ì—¬ ìƒˆ ë°ì´í„°ë¥¼ í‘œì‹œí•œë‹¤.</p>\n<p><strong>isPreviousData</strong>ë¥¼ í†µí•´ì„œ í˜„ì¬ ì¿¼ë¦¬ê°€ ì œê³µí•˜ëŠ” ë°ì´í„°ê°€ ì´ì „ ë°ì´í„°ì¸ì§€ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>\n<h2>Infinite Queries</h2>\n<p>ê¸°ì¡´ ë°ì´í„°ì— ì¶”ê°€ë¡œ ë” ë§ì€ ë°ì´í„°ë¥¼ ë¡œë“œí•˜ê±°ë‚˜, ë¬´í•œ ìŠ¤í¬ë¡¤ë§ í•˜ëŠ” ë°ì´í„° ëª©ë¡ì—ë„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</p>\n<p>ì´ëŸ¬í•œ ìœ í˜•ì˜ ì¿¼ë¦¬ê°€ í•„ìš”í•  ë•Œ useInfiniteQueryë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</p>\n<p>useInfiniteQueryëŠ” íŒŒë¼ë¯¸í„° ê°’ë§Œ ë³€ê²½í•˜ì—¬ ë™ì¼í•œ useQueryë¥¼ ë¬´í•œì • í˜¸ì¶œí•  ë•Œ ì‚¬ìš©í•œë‹¤.</p>\n<ul>\n<li>\n<p>data : ë¬´í•œ ì¿¼ë¦¬ ë°ì´í„°ë¥¼ í¬í•¨í•˜ëŠ” ê°ì²´</p>\n</li>\n<li>\n<p>data.pages : ê°€ì ¸ì˜¨ í˜ì´ì§€ë¥¼ í¬í•¨í•˜ëŠ” ë°°ì—´</p>\n</li>\n<li>\n<p>data.pageParams : useInfiniteQueryê°€ í˜„ì¬ ì–´ë–¤ í˜ì´ì§€ì— ìˆëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆëŠ” íŒŒë¼ë¯¸í„°</p>\n</li>\n<li>\n<p>fetchNextPageë° fetchPreviousPageê¸°ëŠ¥</p>\n<ul>\n<li>fetchNextPage : ë‹¤ìŒ í˜ì´ì§€ì˜ ë°ì´í„°ë¥¼ í˜¸ì¶œí•  ë•Œ ì‚¬ìš©í•œë‹¤.\n<ul>\n<li>useInfiniteQueryì˜ return ê°’ì— í¬í•¨ëœë‹¤.</li>\n<li>fetchNextPageë¥¼ í†µí•´ í˜¸ì¶œëœ ë°ì´í„°ëŠ” ë°°ì—´ì— ê°€ì¥ ìš°ì¸¡ì— ìƒˆë¡­ê²Œ ë‹´ê²¨ì§„ë‹¤.</li>\n</ul>\n</li>\n<li>fetchPreviousPage : ì´ì „ í˜ì´ì§€ì˜ ë°ì´í„°ë¥¼ í˜¸ì¶œí•  ë•Œ ì‚¬ìš©í•œë‹¤.\n<ul>\n<li>fetchPreviousPageë¥¼ í†µí•´ í˜¸ì¶œëœ ë°ì´í„°ëŠ” ë°°ì—´ì— ê°€ì¥ ì¢Œì¸¡ì— ìƒˆë¡­ê²Œ ë‹´ê²¨ì§„ë‹¤.</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>getNextPageParam / getPreviousPageParam : ë¡œë“œí•  ë°ì´í„°ê°€ ë” ìˆëŠ”ì§€, ê°€ì ¸ì˜¬ ì •ë³´ê°€ ìˆëŠ”ì§€ í™•ì¸</p>\n<ul>\n<li>ì¿¼ë¦¬ í•¨ìˆ˜ì—ì„œ ì¶”ê°€ ë§¤ê°œë³€ìˆ˜ë¡œ ì œê³µëœë‹¤.</li>\n<li>getNextPageParam : ë‹¤ìŒ apië¥¼ ìš”ì²­í•  ë•Œ ì‚¬ìš©ë  pageParamê°’ì„ ì •í•  ìˆ˜ ìˆë‹¤. (returnê°’)</li>\n<li>getPreviousPageParam : ì´ì „ apië¥¼ ìš”ì²­í•  ë•Œ ì‚¬ìš©ë  pageParamê°’ì„ ì •í•  ìˆ˜ ìˆë‹¤. (returnê°’)</li>\n<li>getNextPageParamì´ undefinedê°€ ì•„ë‹ ë•Œ, hasNextPageëŠ” trueì´ë‹¤.</li>\n<li>getPreviousPageParamì´ undefinedê°€ ì•„ë‹ ë•Œ, hasPreviousPageëŠ” trueì´ë‹¤.</li>\n</ul>\n</li>\n<li>\n<p>isFetchingNextPage / isFetchingPreviousPage : background refresh stateì™€ loading more state ë¥¼ êµ¬ë¶„ì§“ëŠ”ë° ì‚¬ìš©í•œë‹¤.</p>\n</li>\n<li>\n<p>ì˜ˆì‹œ</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getPersons</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token function\">useInfiniteQuery</span><span class=\"token punctuation\">(</span>\n        <span class=\"token punctuation\">[</span><span class=\"token string\">'infinitePerson'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> \n        <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> pageParam <span class=\"token operator\">=</span> <span class=\"token number\">5</span> <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://localhost:8080/person'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">params</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> pageParam\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function-variable function\">getNextPageParam</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">lastPage<span class=\"token punctuation\">,</span> allPages</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> lastPage<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>id <span class=\"token operator\">&lt;</span> <span class=\"token number\">10</span> <span class=\"token operator\">&amp;&amp;</span> lastPage<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>id <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ë‹¤ìŒ í˜ì´ì§€ë¥¼ í˜¸ì¶œí•  ë•Œ ì‚¬ìš© ë  pageParam</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token function-variable function\">getPreviousPageParam</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">firstPage<span class=\"token punctuation\">,</span> allPages</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> firstPage<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>id <span class=\"token operator\">></span> <span class=\"token number\">1</span> <span class=\"token operator\">&amp;&amp;</span> firstPage<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>id <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ì´ì „ í˜ì´ì§€ë¥¼ í˜¸ì¶œí•  ë•Œ ì‚¬ìš© ë  pageParam </span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// ë¡œë”© ì¤‘ì¼ ê²½ìš°</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">.</span>isLoading<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">LoadingText</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Loading...</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">LoadingText</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// ê²°ê³¼ê°’ì´ ì „ë‹¬ë˜ì—ˆì„ ê²½ìš°</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Person.Container</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                </span><span class=\"token punctuation\">{</span>res<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>pages<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">page</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token keyword\">const</span> <span class=\"token literal-property property\">person</span><span class=\"token operator\">:</span> Iperson <span class=\"token operator\">=</span> page<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n\n                    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n                        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Person.Box</span></span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>person<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Person.Title</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>person<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span><span class=\"token plain-text\">.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Person.Title</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Person.Text</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>person<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Person.Text</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Person.Text</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">(</span><span class=\"token punctuation\">{</span>person<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">}</span><span class=\"token plain-text\">)</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Person.Text</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Person.Box</span></span><span class=\"token punctuation\">></span></span>\n                    <span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n\n                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Person.NextButton</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> res<span class=\"token punctuation\">.</span>hasNextPage <span class=\"token operator\">&amp;&amp;</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">fetchNextPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Next</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Person.NextButton</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> </span><span class=\"token punctuation\">{</span><span class=\"token comment\">/* í´ë¦­ ì‹œ ë‹¤ìŒ í˜ì´ì§€ í˜¸ì¶œ */</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Person.PrevButton</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> res<span class=\"token punctuation\">.</span>hasPreviousPage <span class=\"token operator\">&amp;&amp;</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">fetchPreviousPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Prev</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Person.PrevButton</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> </span><span class=\"token punctuation\">{</span><span class=\"token comment\">/* í´ë¦­ ì‹œ ì´ì „ í˜ì´ì§€ í˜¸ì¶œ */</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Person.Container</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n</ul>\n<h3>infinite queryë¥¼ ë‹¤ì‹œ ê°€ì ¸ì™€ì•¼ í•˜ëŠ” ê²½ìš°</h3>\n<p>useInfiniteQueryë¬¸ì„ ê·¸ëƒ¥ refetch í•˜ê²Œ ë˜ë©´ ì§€ê¸ˆê¹Œì§€ ì¡°íšŒí•œ ëª¨ë“  í˜ì´ì§€ë¥¼ ë‹¤ì‹œ ì¡°íšŒí•˜ê²Œ ëœë‹¤.</p>\n<p>ë•Œë¬¸ì— ì²«í˜ì´ì§€ë§Œ ë‹¤ì‹œ ì¡°íšŒí•˜ê¸° ìœ„í•´ì„œëŠ” ë°ì´í„°ë¥¼ ì´ˆê¸°í™”í•˜ê³  ê°€ì ¸ì™€ì•¼ í•œë‹¤.</p>\n<p>removeë¥¼ í•œ í›„ refetchë¥¼ í•˜ë©´ ëœë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">getRequestsQuery<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ngetRequestsQuery<span class=\"token punctuation\">.</span><span class=\"token function\">refetch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ë§Œì•½ì— ì²«í˜ì´ì§€ë§Œ ì¡°íšŒí•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ë©´ ì²« ë²ˆì§¸ ì¿¼ë¦¬ì—ì„œ ì‹œì‘í•˜ì—¬ ê° ê·¸ë£¹ì„ ìˆœì°¨ì ìœ¼ë¡œ ê°€ì ¸ì˜¨ë‹¤.</p>\n<h3>íŠ¹ì • í˜ì´ì§€ë§Œ ë‹¤ì‹œ ê°€ì ¸ì˜¤ê¸°</h3>\n<p>ëª¨ë“  í˜ì´ì§€ì˜ í•˜ìœ„ ì§‘í•©ë§Œ refetch í•˜ë ¤ë©´ useInfiniteQueryì—ì„œ return í•˜ëŠ” refetch í•¨ìˆ˜ì—ì„œ refetchPage í•¨ìˆ˜ë¥¼ ì´ìš©í•  ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">onst <span class=\"token punctuation\">{</span> refetch <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useInfiniteQuery</span><span class=\"token punctuation\">(</span><span class=\"token string\">'projects'</span><span class=\"token punctuation\">,</span> fetchProjects<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token function-variable function\">getNextPageParam</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">lastPage<span class=\"token punctuation\">,</span> pages</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> lastPage<span class=\"token punctuation\">.</span>nextCursor<span class=\"token punctuation\">,</span>\n <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n \n <span class=\"token comment\">// only refetch the first page // index === {refetchí•˜ê³  ì‹¶ì€ í˜ì´ì§€}</span>\n <span class=\"token function\">refetch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token function-variable function\">refetchPage</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">page<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> index <span class=\"token operator\">===</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>â€¢ refetchPage: (page: TData, index: number, allPages: TData[]) => boolean</p>\n<h2>Placeholder Query Data</h2>\n<ul>\n<li>placeholder data : initialData ì˜µì…¤ê³¼ ìœ ì‚¬í•˜ê²Œ ì¿¼ë¦¬ì— ì´ë¯¸ ë°ì´í„°ê°€ ìˆëŠ” ê²ƒì²˜ëŸ¼ ì‘ë™í•  ìˆ˜ ìˆì§€ë§Œ, ë°ì´í„°ëŠ” ìºì‹œì— ìœ ì§€ë˜ì§€ ì•ŠëŠ”ë‹¤.</li>\n</ul>\n<p>ì‹¤ì œ ë°ì´í„°ë¥¼ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ê°€ì ¸ì˜¤ëŠ” ë™ì•ˆ ì„œë²„ ë°ì´í„°ì™€ëŠ” ê´€ë ¨ ì—†ëŠ” ë³´ì—¬ì£¼ê¸°ìš© ê°€ì§œ ë°ì´í„°ì´ë‹¤.</p>\n<p>â†’ ê°’ìœ¼ë¡œ ì§€ì •</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Todos</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token function\">useQuery</span><span class=\"token punctuation\">(</span><span class=\"token string\">'todos'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/todos'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n     <span class=\"token literal-property property\">placeholderData</span><span class=\"token operator\">:</span> placeholderTodos<span class=\"token punctuation\">,</span>\n   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n <span class=\"token punctuation\">}</span></code></pre></div>\n<p>â†’ í•¨ìˆ˜ë¡œ ì§€ì •</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Todos</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">const</span> placeholderData <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">generateFakeTodos</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n   <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token function\">useQuery</span><span class=\"token punctuation\">(</span><span class=\"token string\">'todos'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/todos'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> placeholderData <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n <span class=\"token punctuation\">}</span></code></pre></div>\n<p>ì¿¼ë¦¬ì˜ placeholderDataì— ì•¡ì„¸ìŠ¤í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ê°€ ì§‘ì¤‘ì ì´ê°€ ëª¨ë“  ë Œë”ë§ì—ì„œ ìˆ˜í–‰í•˜ëŠ” ì‘ì—…ì•„ ì•„ë‹Œ ê²½ìš° ê°’ì„ memoí•˜ê±°ë‚˜ memoizationëœ í•¨ìˆ˜ë¥¼ placeholderDataê°’ìœ¼ë¡œ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤.</p>\n<p>â†’ ìºì‹œì˜ placeholderData</p>\n<p>ê²½ìš°ì— ë”°ë¼ ë‹¤ë¥¸ ì¿¼ë¦¬ì˜ ìºì‹œëœ ê²°ê³¼ì—ì„œ ì¿¼ë¦¬ì— ëŒ€í•œ placeholderDataë¥¼ ì œê³µí•  ìˆ˜ ìˆë‹¤.</p>\n<p>ì˜ˆë¥¼ ë“¤ì–´ ê²Œì‹œë¬¼ì˜ ë¯¸ë¦¬ë³´ê¸° ë²„ì „ì„ ì œê³µí•  ë•Œ ë¸”ë¡œê·¸ ê²Œì‹œë¬¼ ëª©ë¡ ì¿¼ë¦¬ì—ì„œ ìºì‹œëœ ë°ì´í„°ë¥¼ ê²€ìƒ‰í•œ ë‹¤ìŒ ê°œë³„ ê²Œì‹œë¬¼ ì¿¼ë¦¬ì— ëŒ€í•œ placeholderDataë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Todo</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> blogPostId <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token function\">useQuery</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'blogPost'</span><span class=\"token punctuation\">,</span> blogPostId<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/blogPosts/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>blogPostId<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n     <span class=\"token function-variable function\">placeholderData</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>      \n       <span class=\"token keyword\">return</span> queryClient\n         <span class=\"token punctuation\">.</span><span class=\"token function\">getQueryData</span><span class=\"token punctuation\">(</span><span class=\"token string\">'blogPosts'</span><span class=\"token punctuation\">)</span>\n         <span class=\"token operator\">?.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">d</span> <span class=\"token operator\">=></span> d<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> blogPostId<span class=\"token punctuation\">)</span>\n     <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n <span class=\"token punctuation\">}</span></code></pre></div>\n<h2>Initial Query Data (ì´ˆê¸° ì¿¼ë¦¬ ë°ì´í„°)</h2>\n<p>Initial DataëŠ” placeholder Dataì™€ëŠ” ë‹¤ë¥´ê²Œ ìºì‹œì— ìœ ì§€ëœë‹¤.</p>\n<p>ë•Œë¬¸ì— ë¶€ë¶„ì  ë˜ëŠ” ë¬¼ì™„ì „í•œ ë°ì´í„°ë¥¼ ì œê³µí•  ë•ŒëŠ” Initial Data ëŒ€ì‹ ì— placeholder dataë¥¼ ì‚¬ìš©í•˜ì.</p>\n<p>initial dataë¥¼ í†µí•´ ì¿¼ë¦¬ì˜ ì´ˆê¸° ë°ì´í„°ë¥¼ ì„¤ì •í•˜ê³  ì´ˆê¸° ë¡œë“œ ìƒíƒœë¥¼ ê±´ë„ˆë›¸ ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Todos</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token function\">useQuery</span><span class=\"token punctuation\">(</span><span class=\"token string\">'todos'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/todos'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n     <span class=\"token literal-property property\">initialData</span><span class=\"token operator\">:</span> initialTodos<span class=\"token punctuation\">,</span>\n   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n <span class=\"token punctuation\">}</span></code></pre></div>\n<h3>stale time  &#x26;  initialDataUpdatedAt</h3>\n<p>initial dataëŠ” ìƒˆë¡­ê²Œ íŒ¨ì¹˜ëœ ê²ƒì²˜ëŸ¼ ì²˜ë¦¬ë˜ê¸° ë•Œë¬¸ì—, staleTime ì˜µì…˜ì— ì˜í•´ í•´ì„ì´ ë‹¤ë¥´ë‹¤.</p>\n<ul>\n<li>initial dataë¥¼ ì„¤ì •í•˜ê³  staleTimeì„ ì„¤ì •í•˜ì§€ ì•Šê±°ë‚˜ 0ìœ¼ë¡œ ì„¤ì •í•˜ë©´ ì¿¼ë¦¬ê°€ mountë  ë•Œ ì¦‰ì‹œ ë‹¤ì‹œ ê°€ì ¸ì˜¨ë‹¤.</li>\n<li>staleTimeì˜ ì‹œê°„ì„ ì„¤ì •í•˜ë©´, í•´ë‹¹ ë°ì´í„°ëŠ” ê·¸ ì‹œê°„ ë™ì•ˆ ìœ íš¨í•˜ê¸° ë•Œë¬¸ì— ë°±ì—”ë“œì— ìš”ì²­í•˜ì§€ ì•ŠëŠ”ë‹¤.</li>\n</ul>\n<p><strong>initialDataUpdatedAt</strong>ì€ initialDataê°€ ìƒì„±ë˜ì—ˆì„ ë•Œ React Queryì— ì•Œë¦¬ê³  ì´ë¥¼ ê³ ë ¤í•˜ì—¬ background refetchê°€ íŠ¸ë¦¬ê±° ëœë‹¤.</p>\n<p>ê¸°ì¡´ ìºì‹œ í•­ëª©ì—ì„œ dataUpdatedAt íƒ€ì„ìŠ¤íƒ¬í”„ì™€ initialDataë¥¼ ì‚¬ìš©í•  ë•Œ ìœ ìš©í•˜ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useTodo</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">id</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> queryClient <span class=\"token operator\">=</span> <span class=\"token function\">useQueryClient</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token function\">useQuery</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'todo'</span><span class=\"token punctuation\">,</span> id<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">fetchTodo</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">staleTime</span><span class=\"token operator\">:</span> <span class=\"token number\">30</span> <span class=\"token operator\">*</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">initialData</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n      queryClient\n        <span class=\"token punctuation\">.</span><span class=\"token function\">getQueryData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'todo'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'list'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n        <span class=\"token operator\">?.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">todo</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> todo<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">initialDataUpdatedAt</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n\t<span class=\"token comment\">// âœ… initial dataë¥¼ ì±„ìš°ëŠ”ë° ì‚¬ìš©í•œ ì¿¼ë¦¬ ë°ì´í„°ê°€ </span>\n    <span class=\"token comment\">// staleTime(30ì´ˆ) ë” ì˜¤ë˜ëœ ê²½ìš° ë°±ê·¸ë¼ìš´ë“œì—ì„œ ë‹¤ì‹œ ê°€ì ¸ì˜µë‹ˆë‹¤.</span>\n      queryClient<span class=\"token punctuation\">.</span><span class=\"token function\">getQueryState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'todo'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'list'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">?.</span>dataUpdatedAt<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ì´ˆê¸° ë°ì´í„°ì— ê´€ê³„ì—†ì´ ì¿¼ë¦¬ë¥¼ ë‹¤ì‹œ ê°€ì ¸ì™€ì•¼ í•˜ëŠ”ì§€ ì—¬ë¶€ì™€ ì‹œê¸°ë¥¼ ê²°ì •í•˜ëŠ”ë° í•„ìš”í•œ ëª¨ë“  ì •ë³´ë¥¼ ì¿¼ë¦¬ ì¸ìŠ¤í„´ìŠ¤ì— ì œê³µí•œë‹¤.</p>\n<h2>Prefetching</h2>\n<p>prefetchQuery ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ë©´ ìºì‹œì— ë„£ì„ ì¿¼ë¦¬ ê²°ê³¼ë¥¼ ë¯¸ë¦¬ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">prefetchTodos</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>  \n   <span class=\"token keyword\">await</span> queryClient<span class=\"token punctuation\">.</span><span class=\"token function\">prefetchQuery</span><span class=\"token punctuation\">(</span><span class=\"token string\">'todos'</span><span class=\"token punctuation\">,</span> fetchTodos<span class=\"token punctuation\">)</span>\n <span class=\"token punctuation\">}</span></code></pre></div>\n<p>â†’ ì´ ì¿¼ë¦¬ì— ëŒ€í•œ ë°ì´í„°ê°€ ì´ë¯¸ ìºì‹œì— ìˆê³  ë¬´íš¨í™” ë˜ì§€ ì•Šì€ ê²½ìš° ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ì§€ ì•ŠëŠ”ë‹¤.</p>\n<p>â†’ ë°ì´í„°ê°€ ì§€ì •ëœ staleTimeë³´ë‹¤ ì˜¤ë˜ëœ ê²½ìš° ì¿¼ë¦¬ë¥¼ ê°€ì ¸ì˜¨ë‹¤.</p>\n<p>â†’ prefetchëœ ì¿¼ë¦¬ì— ëŒ€í•œ Instanceê°€ ë‚˜íƒ€ë‚˜ì§€ ì•Šìœ¼ë©´ cacheTime ì´í›„ì— ì‚­ì œë˜ì–´ ê°€ë¹„ì§€ì— ìˆ˜ì§‘ëœë‹¤.</p>\n<h2>Mutations</h2>\n<p>ì¼ë°˜ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ìƒì„±/ìˆ˜ì •/ì‚­ì œí•˜ê±°ë‚˜ ì„œë²„ ì‚¬ì´ë“œ ì´í™íŠ¸ë¥¼ ìˆ˜í–‰í•  ë•Œ useMutation hookë¥¼ ì‚¬ìš©í•œë‹¤.</p>\n<p>â†’ mutate í•¨ìˆ˜ëŠ” ë¹„ë™ê¸°ì‹ í•¨ìˆ˜ì´ë¯€ë¡œ React 16ì™€ ì´ì „ ë²„ì „ì˜ ì´ë²¤íŠ¸ ì½œë°±ì—ì„œ ì§ì ‘ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.</p>\n<h3>mutation ìƒíƒœê°’ ì¬ì„¤ì •</h3>\n<p>mutationì˜ errorë‚˜ data ìƒíƒœë¥¼ ì´ˆê¸°í™”í•˜ê¸° ìœ„í•´ reset í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">CreateTodo</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>title<span class=\"token punctuation\">,</span> setTitle<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n   <span class=\"token keyword\">const</span> mutation <span class=\"token operator\">=</span> <span class=\"token function\">useMutation</span><span class=\"token punctuation\">(</span>createTodo<span class=\"token punctuation\">)</span>\n \n   <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onCreateTodo</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n     e<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n     mutation<span class=\"token punctuation\">.</span><span class=\"token function\">mutate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> title <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n   <span class=\"token punctuation\">}</span>\n \n   <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n     <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">onSubmit</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>onCreateTodo<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n       </span><span class=\"token punctuation\">{</span>mutation<span class=\"token punctuation\">.</span>error <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\n         <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h5</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> mutation<span class=\"token punctuation\">.</span><span class=\"token function\">reset</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>mutation<span class=\"token punctuation\">.</span>error<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h5</span><span class=\"token punctuation\">></span></span>\n       <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n       </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n         <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span>\n         <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>title<span class=\"token punctuation\">}</span></span>\n         <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> <span class=\"token function\">setTitle</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n       <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n       </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n       </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Create Todo</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n     </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span>\n   <span class=\"token punctuation\">)</span>\n <span class=\"token punctuation\">}</span></code></pre></div>\n<h3>Mutation Side Effects</h3>\n<p>useMutationì€ mutationì˜ life cycleì˜ ëª¨ë“  ë‹¨ê³„ì—ì„œ ë¹ ë¥´ê³  ì‰½ê²Œ side effectë¥¼ í—ˆìš©í•˜ëŠ” ì˜µì…˜ë“¤ì´ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">useMutation</span><span class=\"token punctuation\">(</span>addTodo<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token function-variable function\">onMutate</span><span class=\"token operator\">:</span> <span class=\"token parameter\">variables</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n     <span class=\"token comment\">// Mutationì´ ê³§ ë°œìƒí•¨</span>\n \n     <span class=\"token comment\">// ì„ íƒì ìœ¼ë¡œ ë¡¤ë°±ê³¼ ê°™ì€ ê²½ìš°ì— ì‚¬ìš©í•  ë°ì´í„°ê°€ í¬í•¨ëœ ì»¨í…ìŠ¤íŠ¸ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.</span>\n     <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span>\n   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n   <span class=\"token function-variable function\">onError</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">error<span class=\"token punctuation\">,</span> variables<span class=\"token punctuation\">,</span> context</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤!</span>\n     console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">rolling back optimistic update with id </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>context<span class=\"token punctuation\">.</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n   <span class=\"token function-variable function\">onSuccess</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">data<span class=\"token punctuation\">,</span> variables<span class=\"token punctuation\">,</span> context</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n     <span class=\"token comment\">// ë¶ ë² ì´ë¹„!</span>\n   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n   <span class=\"token function-variable function\">onSettled</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">data<span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">,</span> variables<span class=\"token punctuation\">,</span> context</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n     <span class=\"token comment\">// ì˜¤ë¥˜ ë˜ëŠ” ì„±ê³µ... ì¤‘ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤!</span>\n   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">//ì½œë°± í•¨ìˆ˜ì—ì„œ promiseë¥¼ ë°˜í™˜í•˜ë©´ ë‹¤ìŒ callbackì´ í˜¸ì¶œë˜ê¸° ì „ì— ê¸°ë‹¤ë¦°ë‹¤.</span>\n<span class=\"token function\">useMutation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">mutationFn</span><span class=\"token operator\">:</span> addTodo<span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">onSuccess</span><span class=\"token operator\">:</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"I'm first!\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">onSettled</span><span class=\"token operator\">:</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"I'm second!\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>mutateë¥¼ í˜¸ì¶œí•  ë•Œ useMutationì— ì •ì˜ëœ ì½œë°± ì™¸ì— ì¶”ê°€ ì½œë°±ì„ íŠ¸ë¦¬ê±° í•˜ê³  ì‹¶ì„ ë•Œ ë™ì¼í•œ ì½œë°± ì˜µì…˜ì„ mutate í•¨ìˆ˜ì— ì˜¤ë²„ë¼ì´ë“œ í•˜ë©´ ëœë‹¤.</p>\n<p>í•˜ì§€ë§Œ, ì»´í¬ë„ŒíŠ¸ê°€ mutationì„ ì™„ë£Œí•˜ê¸° ì „ì— ì–¸ë§ˆìš´íŠ¸ ëœë‹¤ë©´ ì¬ì •ì˜í•œ ì½œë°±ì´ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤.</p>\n<h3>Promises</h3>\n<p>mutate ëŒ€ì‹ ì— <code class=\"language-text\">mutateAsync</code>ë¥¼ ì‚¬ìš©í•˜ë©´ ì„±ê³µì‹œ resolveë˜ê±°ë‚˜ ì˜¤ë¥˜ë¥¼ ë°œìƒì‹œí‚¤ëŠ” promiseë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> mutation <span class=\"token operator\">=</span> <span class=\"token function\">useMutation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">mutationFn</span><span class=\"token operator\">:</span> addTodo <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> todo <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> mutation<span class=\"token punctuation\">.</span><span class=\"token function\">mutateAsync</span><span class=\"token punctuation\">(</span>todo<span class=\"token punctuation\">)</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>todo<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'done'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>Retry</h3>\n<p>ë¦¬ì•¡íŠ¸ ì¿¼ë¦¬ëŠ” mutation ìš”ì²­ì´ ì‹¤íŒ¨í–ˆì„ ë•Œ ìë™ìœ¼ë¡œ ë‹¤ì‹œ ì‹œë„í•˜ì§€ ì•Šì§€ë§Œ, <code class=\"language-text\">retry</code>ì˜µì…˜ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> mutation <span class=\"token operator\">=</span> <span class=\"token function\">useMutation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">mutationFn</span><span class=\"token operator\">:</span> addTodo<span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">retry</span><span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3>mutation ìœ ì§€</h3>\n<p>mutationì€ í•„ìš”í•œ ê²½ìš° hydration funcì„ í†µí•´ ì €ì¥ì†Œì— ìœ ì§€ë˜ê³  ë‹¤ì‹œ ì‹œì‘í•  ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> queryClient <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">QueryClient</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n \n <span class=\"token comment\">// \"addTo\" ëŒì—°ë³€ì´ ì •ì˜</span>\n queryClient<span class=\"token punctuation\">.</span><span class=\"token function\">setMutationDefaults</span><span class=\"token punctuation\">(</span><span class=\"token string\">'addTodo'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token literal-property property\">mutationFn</span><span class=\"token operator\">:</span> addTodo<span class=\"token punctuation\">,</span>\n   <span class=\"token function-variable function\">onMutate</span><span class=\"token operator\">:</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">variables</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n     <span class=\"token comment\">// í•  ì¼ ëª©ë¡ì— ëŒ€í•œ í˜„ì¬ ì¿¼ë¦¬ ì·¨ì†Œ</span>\n     <span class=\"token keyword\">await</span> queryClient<span class=\"token punctuation\">.</span><span class=\"token function\">cancelQueries</span><span class=\"token punctuation\">(</span><span class=\"token string\">'todos'</span><span class=\"token punctuation\">)</span>\n \n     <span class=\"token comment\">// ë‚™ê´€ì  í• ì¼ ìƒì„±</span>\n     <span class=\"token keyword\">const</span> optimisticTodo <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token function\">uuid</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> variables<span class=\"token punctuation\">.</span>title <span class=\"token punctuation\">}</span>\n \n    <span class=\"token comment\">// í•  ì¼ ëª©ë¡ì— ë‚™ê´€ì  í•  ì¼ ì¶”ê°€</span>\n     queryClient<span class=\"token punctuation\">.</span><span class=\"token function\">setQueryData</span><span class=\"token punctuation\">(</span><span class=\"token string\">'todos'</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">old</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>old<span class=\"token punctuation\">,</span> optimisticTodo<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n \n     <span class=\"token comment\">// ë‚™ê´€ì  í• ì¼ê³¼ í•¨ê»˜ ì»¨í…ìŠ¤íŠ¸ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.</span>\n     <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> optimisticTodo <span class=\"token punctuation\">}</span>\n   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n   <span class=\"token function-variable function\">onSuccess</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">result<span class=\"token punctuation\">,</span> variables<span class=\"token punctuation\">,</span> context</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n     <span class=\"token comment\">// í•  ì¼ ëª©ë¡ì˜ ë‚™ê´€ì  í•  ì¼ì„ ê²°ê³¼ë¡œ ë°”ê¿‰ë‹ˆë‹¤.</span>\n     queryClient<span class=\"token punctuation\">.</span><span class=\"token function\">setQueryData</span><span class=\"token punctuation\">(</span><span class=\"token string\">'todos'</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">old</span> <span class=\"token operator\">=></span> old<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">todo</span> <span class=\"token operator\">=></span> todo<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> context<span class=\"token punctuation\">.</span>optimisticTodo<span class=\"token punctuation\">.</span>id <span class=\"token operator\">?</span> result <span class=\"token operator\">:</span> todo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n   <span class=\"token function-variable function\">onError</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">error<span class=\"token punctuation\">,</span> variables<span class=\"token punctuation\">,</span> context</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// í• ì¼ ëª©ë¡ì—ì„œ ë‚™ê´€ì  í• ì¼ ì œê±°</span>\n     queryClient<span class=\"token punctuation\">.</span><span class=\"token function\">setQueryData</span><span class=\"token punctuation\">(</span><span class=\"token string\">'todos'</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">old</span> <span class=\"token operator\">=></span> old<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">todo</span> <span class=\"token operator\">=></span> todo<span class=\"token punctuation\">.</span>id <span class=\"token operator\">!==</span> context<span class=\"token punctuation\">.</span>optimisticTodo<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n   <span class=\"token literal-property property\">retry</span><span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n \n <span class=\"token comment\">// ì¼ë¶€ êµ¬ì„± ìš”ì†Œì—ì„œ ëŒì—°ë³€ì´ ì‹œì‘:</span>\n <span class=\"token keyword\">const</span> mutation <span class=\"token operator\">=</span> <span class=\"token function\">useMutation</span><span class=\"token punctuation\">(</span><span class=\"token string\">'addTodo'</span><span class=\"token punctuation\">)</span>\n mutation<span class=\"token punctuation\">.</span><span class=\"token function\">mutate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> <span class=\"token string\">'title'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n \n <span class=\"token comment\">// ì˜ˆë¥¼ ë“¤ì–´ ì¥ì¹˜ê°€ ì˜¤í”„ë¼ì¸ì´ê¸° ë•Œë¬¸ì— mutationê°€ ì¼ì‹œ ì¤‘ì§€ëœ ê²½ìš°</span>\n <span class=\"token comment\">// ê·¸ëŸ¬ë©´ ì¼ì‹œ ì¤‘ì§€ëœ ëŒì—°ë³€ì´ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì¢…ë£Œë  ë•Œ dehydrateë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span>\n <span class=\"token keyword\">const</span> state <span class=\"token operator\">=</span> <span class=\"token function\">dehydrate</span><span class=\"token punctuation\">(</span>queryClient<span class=\"token punctuation\">)</span>\n \n <span class=\"token comment\">// ê·¸ëŸ° ë‹¤ìŒ ì‘ìš© í”„ë¡œê·¸ë¨ì´ ì‹œì‘ë  ë•Œ mutationë¥¼ ë‹¤ì‹œ ìˆ˜í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span>\n <span class=\"token function\">hydrate</span><span class=\"token punctuation\">(</span>queryClient<span class=\"token punctuation\">,</span> state<span class=\"token punctuation\">)</span>\n \n <span class=\"token comment\">// ì¼ì‹œ ì¤‘ì§€ëœ mutationë¥¼ ì¬ê°œí•©ë‹ˆë‹¤.</span>\n queryClient<span class=\"token punctuation\">.</span><span class=\"token function\">resumePausedMutations</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2>ì¿¼ë¦¬ ë¬´íš¨í™”</h2>\n<p>ì¿¼ë¦¬ë¥¼ ì˜¤ë˜ëœ ê²ƒìœ¼ë¡œ ìƒê°(staleTimeì—ì„œ ì‚¬ìš© ì¤‘ì¸ ëª¨ë“  êµ¬ì„±ì„ ì¬ì •ì˜)í•˜ê³  ë‹¤ì‹œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆëŠ” invalidateQueries ë°©ë²•</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// ìºì‹œì˜ ëª¨ë“  ì¿¼ë¦¬ë¥¼ ë¬´íš¨í™”</span>\n queryClient<span class=\"token punctuation\">.</span><span class=\"token function\">invalidateQueries</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// `todos`ë¡œ ì‹œì‘í•˜ëŠ” í‚¤ë¡œ ëª¨ë“  ì¿¼ë¦¬ë¥¼ ë¬´íš¨í™”</span>\n queryClient<span class=\"token punctuation\">.</span><span class=\"token function\">invalidateQueries</span><span class=\"token punctuation\">(</span><span class=\"token string\">'todos'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>invalidateQueries ëŠ” ë§¤ìš° ìœ ì—°í•˜ì§€ë§Œ, exact ì˜µì…˜ì„ í†µí•´ ì™„ì „íˆ ì¼ì¹˜í•œ ê²ƒë§Œ ë¬´íš¨í™” ì‹œí‚¬ ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">queryClient<span class=\"token punctuation\">.</span><span class=\"token function\">invalidateQueries</span><span class=\"token punctuation\">(</span><span class=\"token string\">'todos'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">exact</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n \n <span class=\"token comment\">// ì•„ë˜ ì¿¼ë¦¬ëŠ” ë¬´íš¨í™”</span>\n <span class=\"token keyword\">const</span> todoListQuery <span class=\"token operator\">=</span> <span class=\"token function\">useQuery</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'todos'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> fetchTodoList<span class=\"token punctuation\">)</span>\n \n  <span class=\"token comment\">// ê·¸ëŸ¬ë‚˜ ì•„ë˜ ì¿¼ë¦¬ëŠ” ë¬´íš¨í™”</span>\n <span class=\"token keyword\">const</span> todoListQuery <span class=\"token operator\">=</span> <span class=\"token function\">useQuery</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'todos'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'done'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> fetchTodoList<span class=\"token punctuation\">)</span></code></pre></div>\n<h3>mutationìœ¼ë¡œ ì¸í•œ ë¬´íš¨í™”</h3>\n<p>mutationì´ ë˜ë©´ ê¸°ì¡´ ì¿¼ë¦¬ë¥¼ ë¬´íš¨í™”í•˜ê³  ìƒˆë¡œ ê°€ì ¸ì˜¤ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤.</p>\n<p>objectë¥¼ ì—…ë°ì´íŠ¸ í•˜ëŠ” mutationë¥¼ ì²˜ë¦¬í•  ë•Œ mutationì˜ ì‘ë‹µìœ¼ë¡œ ìƒˆ ê°œì²´ê°€ ìë™ìœ¼ë¡œ ë°˜í™˜ë˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤.</p>\n<p>mutation í•¨ìˆ˜ì—ì„œ ë°˜í™˜ëœ ê°ì²´ë¥¼ í™œìš©í•˜ê³  ì¿¼ë¦¬ í´ë¼ì´ì–¸íŠ¸ì˜setQueryData ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì¦‰ì‹œ ìƒˆ ë°ì´í„°ë¡œ ê¸°ì¡´ ì¿¼ë¦¬ë¥¼ ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> queryClient <span class=\"token operator\">=</span> <span class=\"token function\">useQueryClient</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n \n <span class=\"token keyword\">const</span> mutation <span class=\"token operator\">=</span> <span class=\"token function\">useMutation</span><span class=\"token punctuation\">(</span>editTodo<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token function-variable function\">onSuccess</span><span class=\"token operator\">:</span> <span class=\"token parameter\">data</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n     queryClient<span class=\"token punctuation\">.</span><span class=\"token function\">setQueryData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'todo'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token number\">5</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span>\n   <span class=\"token punctuation\">}</span>\n\t\t\t<span class=\"token comment\">// ë‘ ë²ˆì§¸ ì¸ìˆ˜ëŠ” `mutate` í•¨ìˆ˜ê°€ ë°›ëŠ” ë³€ìˆ˜ ê°ì²´ì…ë‹ˆë‹¤.</span>\n     <span class=\"token function-variable function\">onSuccess</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">data<span class=\"token punctuation\">,</span> variables</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n       queryClient<span class=\"token punctuation\">.</span><span class=\"token function\">setQueryData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'todo'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> variables<span class=\"token punctuation\">.</span>id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span>\n     <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n \n mutation<span class=\"token punctuation\">.</span><span class=\"token function\">mutate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n   <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n   <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'Do the laundry'</span><span class=\"token punctuation\">,</span>\n <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n \n <span class=\"token comment\">/// ì•„ë˜ ì¿¼ë¦¬ëŠ” ë‹¤ìŒì˜ ì‘ë‹µìœ¼ë¡œ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤.</span>\n <span class=\"token comment\">// ì„±ê³µì ì¸ ëŒì—°ë³€ì´</span>\n <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> status<span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">,</span> error <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useQuery</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'todo'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token number\">5</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> fetchTodoById<span class=\"token punctuation\">)</span></code></pre></div>\n<hr>\n<p><strong>ì°¸ê³ </strong></p>\n<p><a href=\"https://velog.io/@familyman80/React-Query-%ED%95%9C%EA%B8%80-%EB%A9%94%EB%89%B4%EC%96%BC#%ED%8C%81-%EC%9A%94%EB%A0%B9-%EB%B0%8F-%EC%A3%BC%EC%9D%98-%EC%82%AC%ED%95%AD\">https://velog.io/@familyman80/React-Query-í•œê¸€-ë©”ë‰´ì–¼#íŒ-ìš”ë ¹-ë°-ì£¼ì˜-ì‚¬í•­</a><a href=\"https://velog.io/@familyman80/React-Query-%ED%95%9C%EA%B8%80-%EB%A9%94%EB%89%B4%EC%96%BC#%ED%8C%81-%EC%9A%94%EB%A0%B9-%EB%B0%8F-%EC%A3%BC%EC%9D%98-%EC%82%AC%ED%95%AD\">https://velog.io/@familyman80/React-Query-í•œê¸€-ë©”ë‰´ì–¼#íŒ-ìš”ë ¹-ë°-ì£¼ì˜-ì‚¬í•­</a></p>","categories":["Study","React"],"date":"July 25, 2023","description":"[React] React Query","id":"1c4c3eea-404a-5228-be14-8f013e1cd51a","keywords":["React"],"slug":"/react-query/","title":"React Query","readingTime":{"text":"27 min read"}},"listingPagePath":"/blog"}},"staticQueryHashes":["3262260831","948380417"],"slicesMap":{}}